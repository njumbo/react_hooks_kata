import {render, screen} from "@testing-library/react";
import {Contact} from "../../../models/Contact";
import faker from "faker";
import React from "react";
import {ContactImage} from "../ContactImage";
import { getBase64Image, fetchimage, setBase64Image } from "../../common/utils";

const christmasCat = 'data:image/jpeg;base64,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';

const anyName = faker.name.firstName();
const anyPhone = faker.phone.phoneNumber();
const contact = new Contact(anyPhone, anyName, false);

describe('ContactImage', () => {
    it('should display icon to upload image when the contact does not have an image yet', () => {
        render(<ContactImage contact={contact} />);

        expect(screen.getByRole('button')).toBeInTheDocument();
    });

    xit('should open the fileUpload dialog when the user clicks the uploadImage button', () => {
        
    });

    xit('should show the uploaded image', () => {
        setBase64Image('key', christmasCat);
        render(<ContactImage contact={contact} />);

        expect(screen.getByRole('image')).toHaveAttribute('src', christmasCat);
    });

    xit('should upload an image', () => {

    });        
});
